(function(y){var r=window.AmazonUIPageJS||window.P,ra=r._namespace||r.attributeErrors,h=ra?ra("DetailPageImageBlockAssets",""):r;h.guardFatal?h.guardFatal(y)(h,window):h.execute(function(){y(h,window)})})(function(y,r,ra){y.register("postMetric",function(){return{postCountMetric:function(h){if("undefined"!==typeof h){var a=r.ue;if(a){var b=a.count(h)||0;a.count(h,b+1)}}},postTimeMetric:function(h,a){if("undefined"!==typeof h&&"undefined"!==typeof a){var b=r.ue;b&&b.count(h,a)}}}});"use strict";y.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});y.register("postEarlyMetric",function(){return null});"use strict";y.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(h,a,b,n){h=h.extend(!0,{},b,n);var p=new a(h);y.register("ImageBlockAPI",function(){return p.api});return p});"use strict";y.when("A","jQuery").execute(function(h,a){h.on("a:image:load:landingImage",function(){r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",
performance.now())});h.loadDynamicImage(a("#landingImage"))});"use strict";y.when("ImageBlockATF","atf").register("ImageBlockAiryLoader",function(h){function a(a){a&&(y.load.js(a),r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",r.parseInt(performance.now())))}function b(a){a&&y.load.css(a)}var n=h.airyConfig;void 0===n?y.when("ImageBlockBTF").execute(function(h){n=h.airyConfig;a(n.jsUrl);b(n.cssUrl);r.performance&&performance.now&&r.ue&&ue.count&&ue.count("WeblabAllocationErrorCount",
(ue.count("WeblabAllocationErrorCount")||0)+1)}):(a(n.jsUrl),b(n.cssUrl))});"use strict";y.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(h,a,b,n,p){var k={};return function(C){var f=this;f.dispatch=function(a,b){var f=k[a];n.isDefined(f)&&h.each(f,function(a,k){k.call(r,b)})};f.register=function(a,b){n.isDefined(k[a])||(k[a]=[]);"function"===typeof b&&k[a].push(b)};f.model=new a(C,f);f.view=new b(C,f,f.model);f.api=new p(C,
f,f.model);f.init=function(){f.model.init();f.view.init()};f.init()}});"use strict";y.when("A","imageBlockUtils").register("ImageBlockModel",function(h,a){function b(b,k,f,h,p){a.isDefined(b)&&(B.type=b);a.isDefined(k)&&(B.index=k);a.isDefined(f)&&(B.thumbnailIndex=f);a.isDefined(h)&&(B.variant=h);a.isDefined(p)&&(B.color=p)}function n(a){b("image",0,0,"MAIN",a||f.landingAsinColor||f.defaultColor)}function p(a){a=a.data;F=h.copy(B);b(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function k(a){p(a);
a=h.copy(a);a.data=h.copy(B);x.dispatch("updateView",a)}function C(){F=h.copy(B);n(B.color)}var f,x,B={},F={},H,r;return function(a,b){x=b;f=a;x.register("updateSelection",k);x.register("updateModel",p);x.register("resetModel",C);this.init=function(){n()};this.getCurrentItem=function(){return h.copy(B)};this.getPreviousItem=function(){return h.copy(F)};this.setCurrentEvent=function(a){H=a};this.getCurrentEvent=function(){return H};this.setImmersiveViewModalInstance=function(a){r=a};this.getImmersiveViewModalInstance=
function(){return r};this.updateTitle=function(a){f.title=a}}});"use strict";y.when("ImageBlockBTF","postMetric").execute(function(h,a){function b(a,b,C,f,n){function B(a){"click"===a.type&&f.postCountMetric("thumbClick");"click"===a.type&&m.overrideAltImageClickAction?q.dispatch("thumbActionClick",a):q.dispatch("updateSelection",a)}function F(a){m.useClickZoom||q.dispatch("imageClick",a)}function H(a){m.useClickZoom||q.dispatch("imageHover",a)}function L(a){q.dispatch("button360Click",a)}function A(b){!C.isDefined(b)||
"swatchClick"!==b.type&&"updatedData"!==b.type?(l.update(b),"swatchHover"!==b.type&&v.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&f.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):l.render(b.data.color,!1,b.onload)}function G(a){q.dispatch("resize",a)}function N(a){C.selectThumbnail(a,E)}function O(){"function"===typeof r.markFeatureInteractive&&r.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",
events:["click"]}]})}function z(){"function"===typeof r.markFeatureInteractive&&r.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"]},{name:"thumbnail",events:["click","hover"]}]});1===h.useIV?y.when("a-modal").execute(function(){O()}):O();m.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],B);a.declarative("thumb-action",["click"],B);a.declarative("main-image-click",["click"],F);a.declarative("main-image-click",["mouseenter",
"mouseleave"],H);a.declarative("button-360-click",["click"],L);b(r).resize(G);r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPIBMouseEventsReadyTime",performance.now())}function c(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function w(a){var b=v.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var l,m,q,v,E;return function(a,f,h){l=this;m=a;q=f;v=h;E=b("#imageBlock #altImages ul");var d=b("#imageBlock .canvas"),e=b("#main-image-container"),
g;l.subViews=[];for(f=0;f<n.length;f++)l.subViews.push(new n[f](a,h,l,q));l.render=function(a,c,m){var q=0;E.find(".item").remove();a=a||v.getCurrentItem().color;b.each(l.subViews,function(b,g){q=g.render(a,q,d,E,e,c,m)||q});var f=E.find(".a-button-selected").closest(".a-declarative");g=w(f)};l.init=function(){E=b("#imageBlock #altImages ul");var a=E.find(".a-button-selected").closest(".a-declarative"),d=a.data("action"),a=a.data(d)||{};a.color=m.landingAsinColor||m.defaultColor;q.dispatch("updateModel",
{data:a});l.render(a.color,!0);m.isDebug&&r.console&&console.log(m);q.register("updateView",A);q.register("selectThumbnail",N);z()};l.update=function(a){b.each(l.subViews,function(d,b){b.update(a)});m.usePeekHover&&("mouseleave"===a.type?q.dispatch("updateSelection",g):"click"===a.type&&(g=c(a)||g))}}}var n=["A","jQuery","imageBlockUtils","postMetric"].concat(h.views);y.when.apply(y,n).register("ImageBlockView",function(){for(var a=arguments[0],k=arguments[1],h=arguments[2],f=arguments[3],n=[],B=
4,F=arguments.length;B<F;B++)n.push(arguments[B]);return b(a,k,h,f,n)})});"use strict";y.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(h,a,b,n,p,k,C){function f(d,e,c,g){if(!b.isjQueryObjDefined(d.find(".a-button-selected"))){var k=v.getCurrentItem();if(!g||"chromeless-video"!==k.type||!q.autoplayVideo){g=0;"image"===k.type&&(g=Math.max(F(k.color,k.variant),0));var m=e+g;m>=c&&(g=0,m=e);
e=b.getImageHash(k.color,g,q);-1!==e&&(E.dispatch("updateModel",{data:{index:g,thumbnailIndex:m,variant:e.variant,type:"image"}}),e=d.find(".item").get(m),b.selectGivenThumbnail(a(e),d))}}}function x(d,e,c){e=q.colorImages&&q.colorImages[e];var g=d;b.isDefined(e)&&(a.each(e,function(a,e){d<q.maxAlts&&(b.createThumbnail({type:"image",index:a,thumbnailIndex:d,variant:e.variant},e.thumb,K,"imageThumbnail"),d++)}),k.isEnabled&&C.logAltImgRequestPlacedOnThumbnails(a,k,v),f(K,g,d,c));return d}function B(d,
b){if("image"===d.type){var e=a("#image-canvas-caption #canvasCaption"),c,g=q.staticStrings,k=q.colorImages,m=d.color,l=d.index;b&&q.useIV?c=g.clickToExpand:k[m]&&k[m][l].hiRes&&q.useHoverZoom?(c=q.useHoverZoomIpad?g.touchToZoom:q.useClickZoom?g.clickToZoom:g.rollOverToZoom,q.hoverZoomIndicator&&(c="\x3cimg src\x3d'"+q.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+c)):q.useIV&&(c=g.clickToExpand);e.html(c)}}function F(a,d){return b.getIndexForVariant(a,d,q)}function H(d,e){var c="a-dynamic-image";
if(!q.acEnabled){var g;a.each(d.main,function(a,d){b.isDefined(g)||(g=parseFloat(d[1]/d[0])<=parseFloat(q.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});c+=g}var k=b.getMaxDimensionsOfMainImage(d.main,P,q),m=k[0],l=k[1],k=a("\x3cdiv\x3e\x3c/div\x3e"),m={"max-height":m,"max-width":l};k.addClass(c).css(m).attr({"data-old-hires":d.hiRes,"data-a-manual-replacement":"true",onload:e}).data("a-dynamic-image",d.main);return k}function r(a){var d=t.find(".swatchHoverExp");a=H(a);d.find(".imgTagWrapper").html(a);
h.loadImageManually(a);return d}function A(a){var d=P.css("height");null!==d&&a.find(".imgTagWrapper").css("height",d);a.addClass("selected");q.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(q.imgTagWrapperClasses)}function G(a,d){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var e=b.getImageHash(a.color,a.index,q);if(-1===e)return e={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},b.lazyLoadingRequired(a,v,q)?z(a,!1,d):(E.dispatch("updateModel",e),b.showUnavailable(a.color)),
-1;var c=t.find(".item.itemNo"+a.thumbnailIndex);if(!b.isjQueryObjDefined(c)){var c=a.thumbnailIndex,c=t.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+c+" maintain-height"),g=H(e,d);c.find(".placeHolder").replaceWith(g);t.find(".list").append(c);h.loadImageManually(g)}A(c);E.dispatch("loadMagnifier");B(a);q.useIV&&b.isDefined(e.hiRes)&&c.css("cursor","pointer");a.isUserGenerated&&(c=v.getPreviousItem(),g=a.variant,b.isDefined(g)&&c.thumbnailIndex!==
a.thumbnailIndex&&(k.isEnabled&&C.logAltImgRequestServed(k),p.postCountMetric("ImageThumbnailSelectedVariant:"+g),0===g.indexOf("IG")&&(p.postCountMetric("IGImageSelectedVariant:"+g),p.postCountMetric("IGImageSelectedEvent:"+a.interaction))));h.trigger("dp:image-block:update",e)}}function N(a){var d=Math.max(F(a.color,v.getCurrentItem().variant),0),d=b.getImageHash(a.color,d,q);if(-1===d)return b.lazyLoadingRequired(a,v,q)?b.lazyLoadOnHoverEnabled(q)&&(O(".3",!0),b.spinner(t,!0),h.delay(function(){v.getCurrentEvent().data===
a&&z(a,!0)},500)):b.showUnavailable(a.color),-1;var e=r(d);A(e);h.trigger("dp:image-block:update",d)}function O(d,b){b?t.css("opacity",d):a("#imageBlock").css("opacity",d)}function z(a,g,k){d=g;e=k;var m=a.color,l=q.colorToAsin[m];if(l&&l.asin){var f={};f.params={asin:l.asin,productGroupID:q.productGroupID,color:m};f.success=function(f){f?(b.ajaxState(l.asin,"success"),q.colorImages[m]=f.colorImage,b.isDefined(q.spin360ColorEnabled)&&(q.spin360ColorEnabled[m]=f.enable360),m===a.color&&(g&&d?a===v.getCurrentEvent().data&&
(c(a),N(a)):(f={type:"updatedData",data:v.getCurrentItem(),onload:k||e},E.dispatch("updateView",f))),y.register(b.rankedImagesReadyEvent(l.asin))):b.ajaxState(l.asin,"fail")};f.error=function(){b.ajaxState(l.asin,"fail")};f.indicator=b.spinner(t);b.ajaxState(l.asin,void 0)&&"fail"!==b.ajaxState(l.asin,void 0)||(O(".3",g),n.load("/gp/product/features/apparel-main-image/ranked-images.html",f),b.ajaxState(l.asin,"sent"));return q.colorImages&&q.colorImages[m]}}function c(d,e){b.lazyLoadingRequired(d,
v,q)||(a("#imageBlock").css("opacity","1"),t.css("opacity","1"),b.spinner(t,!1),t.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),b.hideUnavailable(),e&&t.find(".list .item").remove())}function w(){var d=t.find(".item .imgTagWrapper"),e=b.getContainerHeight(P,q.holderRatio,q.holderMaxHeight);0<e&&(P.height(e),d.height(e));t.find("img.a-dynamic-image").each(function(){var d=a(this);d.data("a-manual-replacement")&&h.loadDynamicImage(this);var e=d.data("a-dynamic-image"),
e=b.getMaxDimensionsOfMainImage(e,P,q);d.css({"max-height":e[0]+"px","max-width":e[1]+"px"})})}function l(a){B(v.getCurrentItem(),"mouseenter"===a.type)}var m,q,v,E,K,t,P,d,e,g;return function(a,d,e,k){m=this;q=a;v=d;E=k;q.colorImages[q.landingAsinColor]=q.colorImages[q.defaultColor];m.render=function(a,d,e,k,m,l,f){t=e;K=k;P=m;g=x(d,a,l);l||(a=v.getCurrentItem(),b.lazyLoadingRequired(a,v,q)&&E.dispatch("updateModel",{data:{type:"lazy-loaded"}}));c(v.getCurrentItem(),!l);G(v.getCurrentItem(),f);return g};
m.update=function(a){var d=a.data;v.setCurrentEvent(a);"ingress"!==d.type&&c(a.data,!1);"swatchHover"===a.type?d.color===v.getCurrentItem().color?G(v.getCurrentItem()):a.captured||-1===N(d)||(a.captured=!0):"image"===d.type&&(d.interaction=a.type,d.isUserGenerated=!0,"mouseenter"===a.type&&p.postCountMetric("dpcc_imageThumbHovered_"+(d.thumbnailIndex+1)+"_"+g),G(d),q.usePeekHover&&"click"!==a.type||(b.selectGivenThumbnail(a.$declarativeParent,K),"click"===a.type&&(p.postCountMetric("dpcc_imageThumbClicked_total"),
p.postCountMetric("dpcc_imageThumbClicked_"+(d.thumbnailIndex+1)+"_"+g))))};q.overrideAltImageClickAction&&b.addTag("clickEnabledOnAltImages");E.register("imageHover",l);E.register("resize",w)}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(h,a,b,n,p,k){function C(a){O?a.css("cursor","url('"+H.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),
a.css("cursor","zoom-in"))}function f(a){var c=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(b.isDefined(c))for(var c=c[1].split("_"),k=0;k<c.length;k++){var l=c[k].match(/^([A-Z]+)(\d+(\.\d+)?)$/);b.isDefined(l)&&(a[l[1]]=parseInt(l[2],10))}return a}function x(z,c){function w(){var a;c.useClickZoom?(a=c.offsetInClickZoom,a=[Math.min(1,Math.max(0,I[0]-(F[0]+a))/(F[2]-2*a)),Math.min(1,Math.max(0,I[1]-(F[1]+a))/(F[3]-2*a))]):a=g&&g.updatePosition();if(a&&e&&e.detailSize){var d=[e.detailSize[0]-
e.rect.width,e.detailSize[1]-e.rect.height];h.capabilities.rtl?e.detailImage.get(0).style.right=-(a[0]*d[0])+"px":e.detailImage.get(0).style.left=-(a[0]*d[0])+"px";e.detailImage.get(0).style.top=-(a[1]*d[1])+"px"}}function l(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function m(d){var e=V?d.originalEvent.touches[0]||d.originalEvent.changedTouches[0]:"";I=V?[e.pageX,e.pageY]:[d.pageX,d.pageY];if(h.capabilities.rtl){var b=a(r).width();I=V?[b-e.pageX,e.pageY]:[b-d.pageX,d.pageY]}}
function q(a){V&&a.preventDefault();m(a);c.useClickZoom?a=[F[0],F[1],F[0]+F[2],F[1]+F[3]]:(a=g?g.offset:z.offsetParent().offset(),a=H.acEnabled?[a.left,a.top,B.width()+a.left,B.height()+a.top]:[J[0]+a.left,J[1]+a.top,J[0]+J[2]+a.left,J[1]+J[3]+a.top]);I[0]<a[0]||I[1]<a[1]||I[0]>=a[2]||I[1]>=a[3]||H.acEnabled&&!l(z)?(c.fadeMagnifier?N||(N=!0,ba=setTimeout(function(){v(!0)},500)):c.useClickZoom||v(),D&&(D=!1,clearTimeout(U))):(D||(D=!0,U=setTimeout(function(){n.postCountMetric("dppc_hoverZoomOpened");
p.isEnabled&&k.logHoverZoomRequestServed(p)},1E3)),c.fadeMagnifier&&N&&(N=!1,clearTimeout(ba)),w())}function v(d){d&&t.suppressMagnifier(!0);if(A&&(e&&e.hide(),g&&(g.destroy(),g=null),A=!1,V?(z.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),x(),d))z.one("click.magnifier touchstart.magnifier",function(a){E(a,!0)})}function E(d,b){b&&t.suppressMagnifier(!1);if(!A&&
!fa&&(0===Y&&(n.postCountMetric("dppc_hoverTime",new Date-(r.ue&&r.ue.t0||0)),Y=1),G[T]||(n.postCountMetric("dppc_hoverMain"),G[T]=1),J=[z.position().left,z.position().top,z.width(),z.height()],T&&(m(d),e?e.refit().show():e=new y,c.useClickZoom||(g=g||new L),F=e.getWindowSize(),w()),A=!0,V?(z.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",q).bind("touchend.magnifier",v),a(document).trigger("engaged.magnifier")):(H.acEnabled?B.unbind("mousemove.magnifier"):z.unbind("mousemove.magnifier"),
a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",q)),b)){var k=a("#zoomWindow");if(0<k.length)k.one("click.magnifier touchend.magnifier",function(a){v(!0)})}}function x(){c.useHoverZoom&&(V?z.bind("touchstart.magnifier touchmove.magnifier",E):H.acEnabled?l(z)&&B.bind("mousemove.magnifier",E):z.bind("mousemove.magnifier",E))}var t=this,B=z.offsetParent(),d={detailImageUrl:z.attr("data-old-hires"),location:"over",locationElement:z,prelaod:"ready",zIndex:50,offsetInClickZoom:50};c=
a.extend(d,c);c.adjustment=[10,0,-10,0];var e=null,g=null,I=null,J=null,F=null,R={"null":1,"":1,undefined:1},A=!1,fa=!1,T=c.detailImageUrl,V=c.useHoverZoomIpad||0,Y=0,G={},L=function(){function d(a){var b=Math.round(Math.min(z.width(),e.rect.width/a));a=Math.round(Math.min(z.height(),e.rect.height/a));l.css({width:b,height:a});g=[b,a]}var b=this,g=[0,0],k=(e.detailSize&&e.detailSize[0]||5E8)/J[2],m=(e.detailSize&&e.detailSize[1]||5E8)/J[3],k=m>k?m:k;a("#magnifierLens").remove();var l=a("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});
c.generalImageUrls.zoomLensBackground&&l.css({backgroundImage:"url("+c.generalImageUrls.zoomLensBackground+")"});H.showMagnifierOnHover?C(l):l.css("cursor","pointer");b.updatePosition=function(){var a=[J[2]-g[0],J[3]-g[1]],d=0>=a[0]?.5:Math.max(0,Math.min(1,(I[0]-g[0]/2-J[0]-b.offset.left)/a[0])),e=0>=a[1]?.5:Math.max(0,Math.min(1,(I[1]-g[1]/2-J[1]-b.offset.top)/a[1])),c=J[0]+Math.round(d*a[0]),a=J[1]+Math.round(e*a[1]);l.get(0).style.left=c+"px";l.get(0).style.top=a+"px";return[d,e]};b.destroy=function(){l.remove()};
b.offset=z.offsetParent().offset();d(k);b.updatePosition();l.appendTo(z.parent());e.detailImage[0].complete||e.detailImage.load(function(){var a=e.detailImage.width()/J[2];d(a);b.updatePosition()})};L.preload=function(){t.preload(c.generalImageUrls.lensBackgroundUrl)};var y=function(){function d(){var e={};if("over"===c.location){var e=c.useClickZoom,l={},f=a("#leftCol"),q=a("#centerCol"),h=a("#rightCol"),w=a("#hover-zoom-end"),v=a("#actionPanelContainer"),C=b.isjQueryObjDefined(f)?f.outerHeight():
q.outerHeight();l.top=b.isjQueryObjDefined(f)?f.offset().top:q.offset().top;l.bottom=C+l.top;l.right=b.isjQueryObjDefined(h)?h.offset().left:v.offset().left;l.left=e?0:f.offset().left+f.outerWidth();b.isjQueryObjDefined(w)&&w.offset().top>l.bottom&&(l.bottom=w.offset().top);e=l}else"right"===c.location&&(e=z.offset(),e={left:e.left+z.outerWidth(),top:e.top,right:e.left+z.outerWidth()+400,bottom:e.top+400});c.minHeightElement&&(e.bottom=Math.max(e.bottom,e.top+a(c.minHeightElement).outerHeight()));
e.bottom=Math.min(e.bottom,a(r).scrollTop()+a(r).height());e.left+=k[0];e.top+=k[1];e.right+=k[2];e.bottom+=k[3];e.width=e.right-e.left;e.height=e.bottom-e.top;c.enhancedHoverOverlay&&b.isDefined(r.pageXOffset)&&(l=a(r).width(),e.width=l-e.left+r.pageXOffset-18,e.height-=14);m.css({left:e.left,top:e.top,width:e.width,height:e.height});g.rect=e;return g}function e(a){var d=new Image;g.detailSize=[0,0];d.onload=function(){g.detailSize=[d.width,d.height];w()};d.src=a.attr("src");if(0<d.width&&0<d.height)g.detailSize=
[d.width,d.height];else if(c.detailImageSize)g.detailSize=c.detailImageSize;else{a=f(d.src);var b=J[2]/J[3];a.SS||a.AA?(a=a.SS||a.AA,g.detailSize=[a,a]):a.SX?g.detailSize=[a.SX,Math.round(a.SX/b)]:a.SY?g.detailSize=[Math.round(a.SY*b),a.SY]:a.SL&&(g.detailSize=1<=b?[a.SL,Math.round(a.SL/b)]:[Math.round(a.SL*b),a.SL])}}var g=this,k=c.adjustment;a("#zoomWindow").remove();var l={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:c.zIndex};c.enhancedHoverOverlay&&(l.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",
l.border="1px solid #949494",l.borderColor="rgb(148,148,148)");var m=a("\x3cdiv id\x3d'zoomWindow' /\x3e").css(l);c.fadeMagnifier&&m.fadeIn(200);c.useClickZoom&&(O?m.css("cursor",'url("'+c.zoomOutIcon+'"), auto'):(m.css("cursor","-webkit-zoom-out"),m.css("cursor","-moz-zoom-out"),m.css("cursor","zoom-out")));g.updateImage=function(d){d=a("\x3cimg id\x3d'detailImg' src\x3d'"+d+"'/\x3e").css("position","absolute");g.detailImage&&g.detailImage.remove();m.append(d);a(document).trigger("updated.magnifier");
g.detailImage=d;e(g.detailImage)};g.refit=function(){d();e(g.detailImage);return g};c.fadeMagnifier?(g.show=function(){m.fadeIn(200);return g},g.hide=function(){m.fadeOut(200);return g}):(g.show=function(){m.show();return g},g.hide=function(){m.hide();return g});g.destroy=function(){m.remove();return g};g.getWindowSize=function(){return[g.rect.left,g.rect.top,g.rect.width,g.rect.height]};g.updateImage(T);d();m.appendTo(document.body)},N=!1,ba,D=!1,U;t.preload=function(d){d=a.makeArray(d);for(var e=
d.length,b=0;b<e;b++)d[b]instanceof Array?t.preload(d[b]):"string"===typeof d[b]&&d[b]&&!R[d[b]]&&(R[d[b]]=new Image,R[d[b]].src=d[b])};t.changeImage=function(d,b){A&&v();T=b;z.attr("src",d);t.preload(d);J=[z.position().left,z.position().top,z.width(),z.height()];b&&("immediately"===c.preload?t.preload(b,!0):a(r).ready(function(){t.preload(b)}),e?e.updateImage(b):z.attr("data-old-hires",b))};t.destroy=function(){H.acEnabled?B.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):
z.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");g&&g.destroy();g=null;e&&e.destroy();e=null};t.detailImage=function(){return e.detailImage};t.suppressMagnifier=function(a){fa=a};t.isEngaged=function(){return A};t.engageMagnifier=E;t.disengageMagnifier=v;z[0].complete?x():z.one("load",x);t.preload(z.attr("src"));r.performance&&performance.now&&r.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(c.preload){var ka=
c.detailImageUrl,d=function(){t.preload(ka,!0);c.useClickZoom||L.preload()},W=c.preload;W.constructor!==Array&&(W=[W]);for(var u=0;u<W.length;u++)if("immediately"===W[u])d();else if(a(r)[W[u]])a(r)[W[u]](d);else a(r).bind(W[u],d)}return t}function B(){if(H.useHoverZoom){var f={adjustment:[0,0,1,1],generalImageUrls:H.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:199,useHoverZoomIpad:H.useHoverZoomIpad,useHoverZoom:H.useHoverZoom,useClickZoom:H.useClickZoom,fadeMagnifier:H.fadeMagnifier,
zoomOutIcon:H.staticImages.zoomOutCur,enhancedHoverOverlay:H.enhancedHoverOverlay||H.atfEnhancedHoverOverlay};G&&(G.destroy(),G=void 0);var c=y.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");b.isjQueryObjDefined(c)?H.useClickZoom?(c.one("click.loadmagnifier touchstart.loadmagnifier",function(a){G=new x(c,f);G.engageMagnifier(a,!0)}),O?c.css("cursor",'url("'+H.staticImages.zoomInCur+'"), auto'):(c.css("cursor","-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor",
"zoom-in"))):G=new x(c,f):p.isEnabled&&k.logHoverZoomApplicability(a,p)}}var F,H,L,A,G,y,O=navigator.userAgent.match(/msie|trident/i);return function(a,b,k,l){F=this;H=a;L=b;p.refToModel=L;A=l;F.render=function(a,b,c,l,k,f){y=c;G&&(G.destroy(),G=void 0)};F.update=function(a){};A.register("loadMagnifier",B);A.register("resize",B)}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(h,a,b,n){function p(a,k,h){a=(a=h?h:b.getColorFromState(k.getState().hovered_variations,
f))&&""!==a?a:f.defaultColor;B.dispatch("updateView",{type:"swatchHover",data:{color:a}});n.postCountMetric("swatchHover")}function k(a,k,h,C){a=(a=C?C:b.getColorFromState(k.getState().selected_variations,f))&&""!==a?a:f.defaultColor;a===x.getCurrentItem().color?"function"===typeof h&&h():(B.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:h}),n.postCountMetric("swatchClick"))}var C,f,x,B;return function(a,b,n,A){C=this;f=a;x=b;B=A;h.on("image-block-twister-swatch-hover",p);h.on("image-block-twister-swatch-click",
k);C.render=function(a,b,k,f,c){};C.update=function(a){}}});"use strict";y.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(h,a,b,n,p,k,C){function f(d,e,b,g){!c.autoplayVideo||J||c.useChromelessVideoPlayer?!n.isjQueryObjDefined(d.find(".a-button-selected"))&&(b=w.getCurrentItem(),!g||c.prioritizeVideos||"chromeless-video"===b.type&&c.autoplayVideo)&&(g=n.getVideoHash(b.color,0,c),-1!==g&&(e+=0,l.dispatch("updateModel",
{data:{index:0,thumbnailIndex:e,variant:g.variant,type:c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),e=d.find(".item").get(e),n.selectGivenThumbnail(a(e),d))):(n.selectGivenThumbnail(d.find("img:last"),d),n.fadeToThumbnail(d.find("img").length-1,E,d))}function x(a){var d=w.getCurrentItem().color;if(c.useChildVideos&&!c.colorToVideo[d]){var e=function(){if(a){c.colorToVideo[d]=a;var e={type:"updatedData",data:w.getCurrentItem()};l.dispatch("updateView",e)}};c.lazyLoadExperienceDisabled?
e():y.when(n.rankedImagesReadyEvent(c.colorToAsin[d].asin)).execute(function(){e()})}}function B(a){if(!c.useChildVideos)return n.lazyLoadingRequired(w.getCurrentItem(),w,c)?void 0:c.videos;if(c.colorToVideo[a])return c.colorToVideo[a];var d=c.colorToAsin[a];if(d&&d.asin){var e={};e.params={asin:d.asin,productGroupID:c.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:c.useChromelessVideoPlayer,isUDP:c.isUDP};c.isDPXFeatureEnabled||(e.success=function(a){x(a)},p.load("/gp/product/features/apparel-main-image/videos.html",
e));return c.colorToVideo&&c.colorToVideo[a]}}function r(){l.dispatch("selectThumbnail",n.useTabbedImmersiveView(c)?1:0)}function H(d,e,g,c){return b.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:d[0],streamingUrls:e.url,swfUrl:g.swfUrl,foresterMetadataParams:g.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=n.isjQueryObjDefined(d.find("video"))?"HTML5":"FLASH";k.postCountMetric("dppc_chromelessVideo:"+
a)},playing:function(){d.parent().css("z-index",8)},videounsupported:function(){r();k.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){r();k.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){t.seek(0)}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(e,b,g){e=g.durationSeconds-g.playheadTimeSeconds;d.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*e,.1,function(){d.parent().css({"background-color":"transparent",
"z-index":-1});r();a(this).show().css("opacity",1)})}}]})}function L(e){if("chromeful-video"===e.type||"chromeless-video"===e.type){var b=n.getVideoHash(e.color,e.index,c);if(-1===b)return-1;if("chromeful-video"===e.type){e=E.width()/E.height();var k=parseInt(b.videoWidth,10),l=parseInt(b.videoHeight,10);n.updateAspectRatio(e,k,l,q);t?(t.show(),n.loadMediaIntoAiry(t,b,P,c.tabletWeb)):t=c.tabletWeb?g:n.createAiryInstanceForChromeful(q,b,P,null,c.autoplayVideo,E,v,m);b:if(n.useTabbedImmersiveView(c)){if(1<
n.getVideosCount(w.getCurrentItem().color,c)){if(n.isDefined(K)){v.show();break b}K=a('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(c.staticStrings.watchMoreVideos);v.find("#videoCaption").append(K);h.declarative.create(K,"videoIngressClick",d)}n.playVideoInImmersiveView(c,w.getCurrentItem().color)&&(h.declarative.create(q,"videoIngressClick",d),q.attr&&q.attr("data-ux-click",""),q.children().css("z-index","-1"),q.css("display","inline-block"))}else v.find("#videoCaption").text(c.staticStrings.playVideo),
v.show();b=t;c.autoplayVideo&&b&&!J&&(n.toggleVideoCaption(v),b.setVolume(0),b.show(),b.play(),J=!0)}else t?(t.show(),n.loadMediaIntoAiry(t,b,P,c.tabletWeb),t.play(),v.show()):(t=H(q,b,P))&&t.play()}}function A(e,b,g){var l=B(b);b=e;n.isDefined(l)&&0<l.length&&c.alwaysIncludeVideo&&e===c.maxAlts&&(m.find(".item:last").remove(),e--);n.isDefined(l)&&(a.each(l,function(b,g){if(e<c.maxAlts){var f=c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",h={type:f,index:b,thumbnailIndex:e,variant:g.variant};
d={type:"video-ingress",index:b,thumbnailIndex:e,variant:g.variant};n.useTabbedImmersiveView(c)&&("chromeful-video"===f&&(Q+=" videoBlockIngress  videoBlockDarkIngress",g.thumb=g.thumb.replace("_PKmb-play-button-overlay-thumb","")),c.altsOnLeft||(Q+=" a-align-top"));n.createThumbnail(h,g.thumb,m,Q);if(2===c.dp60VideoPosition){var q=m,h=c.dp60VideoPosition;if(0!==h){var w=q.children(".imageThumbnail"),q=q.children(".videoBlockIngress");w&&q&&w[h-1]&&a(w[h-1]).before(q[0])}}n.useTabbedImmersiveView(c)&&
(G(m.find(".videoBlockIngress img"),c.videoIngressATFSlateThumbURL),h=1<l.length?"multiple-videos":"one-video",(w=1<l.length?l.length+" "+c.staticStrings.multipleVideos:c.staticStrings.singleVideo)&&m.find(".videoBlockIngress").append(m.find("#videoCount_template").clone().text(w).attr("id","videoCount")).addClass(h));I||(I=!0,k.postCountMetric("chromeless-video"===f?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));e++}if(n.useTabbedImmersiveView(c))return!1}),f(m,b,e,g));return e}
function G(a,d){var e=a.attr("src");if(e&&d){a.attr("src",d);var b=new Image;b.onload=function(d){a.attr("src",e)};b.src=e}}function N(a){t&&t.pause();a.data=d;a.clickTimeStamp=a.$event.timeStamp;var e="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";l.dispatch("imageClick",a);k.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);k.postCountMetric(e)}function O(a){g=a.airy;g.hide=function(){g.pause();h.$("#main-video-container").find(".vse-player-container").hide()};
g.show=function(){h.$("#main-video-container").find(".vse-player-container").show();g.play()};g.getMediaSourceInfo=function(){return n.getMediaSourceInfo()}}var z,c,w,l,m,q,v,E,K,t,P,d,e,g,I=!1,J=!1,Q="videoThumbnail";return function(b,g,f,p){z=this;c=b;w=g;l=p;P=c.airyConfig;c.colorToVideo={};c.colorToVideo[c.landingAsinColor]=c.colorToVideo[c.defaultColor]=c.videos;z.render=function(d,b,g,l,k,f){m=l;q=k.find("#main-video-container");v=q.parent().find("#video-canvas-caption");E=a("#main-image-container");
c.useChromelessVideoPlayer||q.addClass("chromeful-container");e=A(b,d,f);L(w.getCurrentItem());n.useTabbedImmersiveView(c)&&h.declarative("videoIngressClick",["click"],N);d=w.getCurrentItem().color;b=n.getVideoHash(d,0,c);-1!==b&&c.tabletWeb&&(d=n.getNilgiriServiceAjaxRequest(c,d,b),C.get(h,"#main-video-container",d,function(){h.$("#main-video-container").find(".vse-player-container").hide()},function(){h.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return e};z.update=function(a){var b=
a.data;"ingress"!==b.type&&t&&(t.hide(),q.parent().css("z-index",-1),v.hide());if("swatchHover"===a.type)b.color===w.getCurrentItem().color?L(w.getCurrentItem()):a.captured||n.lazyLoadingRequired(b,w,c)&&!n.lazyLoadOnHoverEnabled(c)&&L(w.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)"mouseenter"===a.type&&k.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+e),L(b),c.usePeekHover&&"click"!==a.type||(n.selectGivenThumbnail(a.$declarativeParent,m),
"click"===a.type&&n.useTabbedImmersiveView(c)&&(k.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+e),d.action="videoIngressClick",d.clickTimeStamp=a.$event.timeStamp,d.$event=a.$event,d.$currentTarget=a.$currentTarget,l.dispatch("videoIngressClick",d),k.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(c.isDPXFeatureEnabled)h.on("triggerVideoAjax",x);h.on("vseAiry",O)}});"use strict";y.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric",
"postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(h,a,b,n,p,k,C,f){function x(a){return a.hiRes||a.large||a.main[a.main.length-1]}function B(){u.find("#ivTitle").click(function(){W.hide()})}function F(){M=Oa?{type:"360-spin"}:U.getCurrentItem()}function H(){var a=u.find("#ivStage"),d=W.$container.find(".a-popover-wrapper"),e=d.find(".a-popover-inner"),d=d.height()-f.getDimension(e,"padding-top")-f.getDimension(e,"padding-bottom");u.css("height",d);var e=
u.find("#ivTitle").outerHeight(!0),b=u.find("#ivVariationSelection").outerHeight(!0),g=u.find("#ivMediaSelection").outerHeight(!0),c=u.find("#ivThumbs"),l=f.getDimension(c,"margin-top")+f.getDimension(c,"margin-bottom");c.css("height",d-e-b-g-l);u.find("#ivLargeImage").css("height",d);a.css("width",u.width()-f.getDimension(u,"padding-left")-f.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-f.getDimension(a,"margin-left")-f.getDimension(a,"margin-right"))}function L(){u.find("#ivMediaSelect").change(function(){var d=
a(this).val();"all"===d?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").show(),"chromeful-video"===M.type&&u.find("#ivVideo_"+M.index).click()):"images"===d?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").hide(),"chromeful-video"===M.type&&(0===da&&0===Z?u.find("#iv360").click():0===da?u.find("#ivHeroImage_0").click():u.find("#ivImage_0").click())):"videos"===d&&(u.find("#ivVideoList").show(),u.find("#ivThumbs").hide(),"chromeful-video"!==
M.type?u.find("#ivVideoList_0").click():u.find("#ivVideoList_"+M.index).click())})}function A(){var a=u.find("#ivStage").find("#ivLargeImage"),d=a.width(),e=a.height(),b=a.find(".fullscreen");b.removeAttr("style");var g=b.width(),c=b.height();0<b.length&&(b[0].naturalWidth&&(g=b[0].naturalWidth),b[0].naturalHeight&&(c=b[0].naturalHeight));a.css("cursor","auto");var g=0===g?1:g,c=0===c?1:c,l=Math.min(d/g,e/c),k=c*l,m=g*l;1>l?(Pa?a.css("cursor","url('"+D.staticImages.zoomIn+"'), auto"):(a.css("cursor",
"-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;g=Math.min(m,g);c=Math.min(k-20,c);b.css({"margin-top":(e-c)/2,"margin-left":(d-g)/2,height:c,width:g});a.css("visibility","visible");Aa=!1}function G(a){var d=u.find("#ivLargeImage");d.css("visibility","hidden");d.empty();f.animateStageIn(d);d.append(a);A()}function N(){aa&&aa.pause();u.find("#ivLarge360").css("display","none");u.find("#ivLargeVideo").css("display","none");u.find("#ivLargeImage").css("display",
"none");q()}function O(d){N();u.find("#ivLargeImage").css("display","block");var e;"hero-image"===d?b.isDefined(ha)&&(e=x(ha[M.index])):b.isDefined(la)&&(e=x(la[M.index]));if(b.isDefined(e)){u.find(".fullscreen").remove();var g=a("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),c=u.find("#ivLargeImage");f.animateStageOut(c,function(){g.load(function(){G(g)});if(g[0].complete)G(g);else{c.empty();var d=(c.height()-104)/2,e=(c.width()-80)/2;a("\x3cimg\x3e").attr("src",D.staticImages.spinner).css({position:"relative",
top:d+"px",left:e+"px"}).appendTo(c)}})}}function z(){var a=parseInt(M.index,10)+1;a>=ma.length||u.find("#ivVideo_"+a).click()}function c(){var a;b.isDefined(ma)&&(a=ma[M.index]);if(b.isDefined(a)){N();var d=u.find("#ivLargeVideo").css("display","block");aa?(aa.isDetached()&&aa.attach(d[0]),b.loadMediaIntoAiry(aa,a,wa,D.tabletWeb),aa.show()):(aa=b.createAiryInstanceForChromeful(d,a,wa,"ImmersiveView"),wa.enableContinuousPlay&&aa.bind("ended",z));aa.play({isAsync:!0})}}function w(){F();var a;a="hero-image"===
M.type?u.find("#ivHeroImage_"+M.index):"image"===M.type?u.find("#ivImage_"+M.index):"chromeful-video"===M.type||"chromeless-video"===M.type?u.find("#ivVideo_"+M.index):"360-spin"===M.type?u.find("#iv360"):b.isDefined(ha)?u.find("#ivHeroImage_"+M.index):u.find("#ivImage_"+M.index);b.isjQueryObjDefined(a)||(a=u.find("#ivImage_0"));l(a)}function l(a){u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(M.type="chromeful-video",M.index=a.attr("id").split("_")[1],
c()):a.hasClass("ivHeroImage")?(M.type="hero-image",M.index=a.attr("id").split("_")[1],O(M.type)):a.hasClass("iv360Image")?(M.type="360-spin",M.index=0,m()):(M.type="image",M.index=a.attr("id").split("_")[1],O(M.type))}function m(){N();u.find("#ivLarge360").css("display","block");P();var a=u.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});f.animateStageIn(a)},200);E();p.postCountMetric("dppc_click360");ta=Date.now()}function q(){0<ta&&(v("dppc_duration360",Date.now()-
ta),ta=0)}function v(a,d){r.ue&&r.ue.count(a,d)}function E(){if(0<pa){var a=u.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function K(d,e){if(pa<d.length){var b=a("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:sa+"px"});b.hide();e.append(b);b.get(0).onload=function(){e.closest(document.documentElement).length&&(pa++,1===pa&&(E(),0<ta&&v("dppc_loadTime360",Date.now()-ta)),0<Ga&&v("dppc_perSpriteloadTime360",Date.now()-Ga),u.find("#iv360Spinner").hide(),
b.show(),xa=5*S.imageLocations[Math.floor(ya/S.imageLocations[0].length)][ya%S.imageLocations[0].length],K(d,e))};b.attr("src",d[pa].replace(/(\._SP)\d+(,)\d+/,"$1"+ua+"$2"+va));Ga=Date.now()}}function t(a){if(b.isDefined(S.spriteWidthSizes)&&0<S.spriteWidthSizes.length){var d=S.spriteWidthSizes,e=d.length,g=d[0],c=d[e-1];if(a<=g)return g;if(a>c)return c;for(g=0;g<e;g++)if(a>d[g]&&a<=d[g+1])return d[g+1]}else return a}function P(){var e=u.find("#ivLarge360");e.children("#image-360-sprites").length||
(e.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),e.css({"margin-left":0,"margin-top":0,width:e.parent().width(),height:e.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",D.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(e),Ha=!0,d())}function d(){if(b.isDefined(S.spriteURLs)&&
b.isDefined(u)&&Ha&&!Ia){var d=u.find("#ivLarge360"),c=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(S.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",S.staticImages.hint360).appendTo(c);a("\x3cdiv\x3e").css({"text-align":"center"}).text(D.staticStrings.dragToSpin).appendTo(c);c.appendTo(d);var c=S.imageWidth,l=S.imageHeight,k=d.parent().width(),m=d.parent().height(),
f=0,h=0;c/l>k/m?(ua=t(k),va=Math.round(l/c*ua),na=Math.ceil(k),sa=Math.ceil(va/ua*k),h=(m-sa)/2):(va=t(m),ua=Math.round(c/l*va),sa=Math.ceil(m),na=Math.ceil(ua/va*m),f=(k-na)/2);d.css({"margin-left":f,"margin-top":h,width:na+"px",height:sa+"px",overflow:"hidden",position:"relative"});d.children("#image-360-sprites").css("width",6*na+"px");K(S.spriteURLs,u.find("#image-360-sprites"),0);c=u.find("#ivLarge360");c.bind("mousedown",J);c.bind("touchstart",e);c.bind("touchmove",g);c.bind("touchend",I);a(document).bind("mousemove",
Q);a(document).bind("mouseup",R);b.isDefined(D.staticImages.grab)&&d.css("cursor","url('"+D.staticImages.grab+"'), auto");Ia=!0}}function e(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function g(a){Ba&&(X(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function I(a){Ba&&(Ba=!1)}function J(a){Ca=!0;Ka=a.originalEvent.clientX;b.isDefined(D.staticImages.grabbing)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+D.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+D.staticImages.grabbing+"'), auto"));return!1}function Q(a){Ca&&(X(a.originalEvent.clientX-Ka),Ka=a.originalEvent.clientX)}function R(a){Ca&&(Ca=!1,b.isDefined(D.staticImages.grab)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+D.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function X(a){for(a=xa-=a/na*180;0>a;)a+=360;for(;360<a;)a-=360;xa=a;var d;a=360;for(var e=0;e<pa;e++)for(var g=0;g<S.imageLocations[e].length;g++){var c=Math.abs(xa-5*S.imageLocations[e][g]);
c<a&&(a=c,d=e*S.imageLocations[0].length+g)}d!==ya&&(a=Math.floor(d/S.imageLocations[0].length),a!==Math.floor(ya/S.imageLocations[0].length)&&(b.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),e=u.find("#image-360-sprites").children(),La.drawImage(e[a],0,0)),a=u.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ya=d;a=d%S.imageLocations[0].length*-1*na;d=-1*Math.floor(d/S.imageLocations[0].length)*sa;e=u.find("#ivLarge360").children("#image-360-sprites");
e.css("-webkit-transform","translate3d("+a+"px, "+d+"px, 0)");e.css("transform","translate3d("+a+"px, "+d+"px, 0)")}function fa(){u.delegate(".ivThumb","click",function(){var d=a(this);l(d)});u.delegate(".ivThumbVideoListOuter","click",function(){u.find(".ivThumbVideoListOuter").removeClass("selected");var d=a(this);d.addClass("selected");M.type="chromeful-video";M.index=d.attr("id").split("_")[1];c()})}function T(){aa&&!aa.isDetached()&&(wa.volume=aa.getVolume(),aa.detach(),!document.all||r.atob||
document.addEventListener||(aa=null));u.find("#ivLargeImage").empty();q()}function V(a,d){return 0<d?d/2:Math.min(0,Math.max(d,a))}function Y(d){var e=qa.left-(d.pageX-Da[0])*Ea;h.capabilities.rtl&&(e=qa.left-(a(r).width()-d.pageX-Da[0])*Ea);d=qa.top-(d.pageY-Da[1])*Ea;e=V(e,Fa.left);d=V(d,Fa.top);u.find(".fullscreen").css({left:e,top:d})}function ea(){u.delegate("#ivLargeImage","click",function(a){if(Aa)A();else if(za){u.find(".fullscreen").removeAttr("style");if(za){var d=u.find("#ivLargeImage"),
e=d.find(".fullscreen");Pa?d.css("cursor","url('"+D.staticImages.zoomOut+"'), auto"):(d.css("cursor","-webkit-zoom-out"),d.css("cursor","-moz-zoom-out"),d.css("cursor","zoom-out"));Aa=!0;var b=u.find("#ivLargeImage");Fa.left=b.width()-e.width();Fa.top=b.height()-e.height();var b=d.height()/2,g=d.width()/2;Da=[d.offset().left+g,d.offset().top+b];qa.top=b-e.height()/2;qa.left=g-e.width()/2;e.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(e.height()/d.height(),e.width()/d.width())}Y(a)}});
u.delegate("#ivLargeImage","mousemove",function(a){Aa&&Y(a)})}function ga(d){if(b.isImmersiveViewEnabled(D,U.getCurrentItem().color))if(Ma){var e=d.$event.originalEvent;e.acknowledge&&e.acknowledge(d.$currentTarget[0]);Oa=b.isDefined(d)&&"button-360-click"===d.action;k.isEnabled&&C.logImmersiveViewRequestServed(k);p.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(W))W.show();else{d=a("#auiImmersiveViewDiv");var e=a(r).height()-150,g=a(r).width()-75;W=Ma.create(d,{name:"immersiveView",activate:"onclick",
width:g,height:e,popoverLabel:"ImmersiveView",hideHeader:!0});d.click()}if(Na){u=a("#ivMain");d=U.getCurrentItem().color;la=D.colorImages[d];ha=D.heroImage[d];ma=D.useChildVideos?D.colorToVideo[d]:D.videos;ra=ca()&&D.spin360ColorEnabled[d];S=ca()?D.spin360ColorData[d]:void 0;F();ja=Z=oa=da=0;b.isDefined(ha)&&(Z=ha.length);b.isDefined(la)&&(da=la.length);b.isDefined(ma)&&(oa=ma.length);ra&&(ja=1);f.populateTitle(u.find("#ivTitle"),45,D);f.populateVariationSelection(u.find("#ivVariationSelection"));
d=u.find("#ivMediaSelect");0===da+ja||0===oa?(d.parent().hide(),u.find("#ivThumbs").addClass("noMediaSelection")):(d.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(D.staticStrings.allMedia+" ("+(Z+da+ja+oa)+")").appendTo(d),a("\x3coption/\x3e").attr("value","images").text(D.staticStrings.images+" ("+(Z+da+ja)+")").appendTo(d),a("\x3coption/\x3e").attr("value","videos").text(D.staticStrings.videos+" ("+oa+")").appendTo(d),d.parent().show(),d.val("all"));d=u.find("#ivThumbs");
d.find(".ivRow").not(".placeholder").remove();for(var e=Z+da+oa+ja,c=g=0;g<e;)for(var l=d.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(d),m=0;3>m&&g<e;m++,g++,c++)if(c<Z){var q=ha[g].thumb,w=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(l);w.find(".ivThumbImage").css("background",'url("'+f.getResizedThumbnailURL(q)+'") center no-repeat')}else if(c>=Z&&c<da+Z)q=la[g-Z].thumb,w=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id",
"ivImage_"+(g-Z)).appendTo(l),w.find(".ivThumbImage").css("background",'url("'+f.getResizedThumbnailURL(q)+'") center no-repeat');else if(c>=Z+da&&c<da+Z+ja)w=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(l),w.find(".ivThumbImage").css("background",'url("'+(b.isDefined(D.staticImages.icon360)?f.getResizedThumbnailURL(D.staticImages.icon360,!0):"")+'") center no-repeat');else if(q=ma[g-da-Z-ja],w=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(g-da-Z-ja)).appendTo(l),w.find(".ivThumbImage").css("background",'url("'+q.thumbUrl+'") center no-repeat'),b.isDefined(q)){var v={position:"triggerTop"},n=u.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");n.find(".ivVideoPopoverTitle").text(q.title);n.find(".ivVideoPopoverDuration").text(q.durationTimestamp);v.inlineContent=n[0];h.declarative.create(w,"a-tooltip",v)}d=u.find("#ivVideoList");d.find(".ivThumbVideoListOuter").not(".placeholder").remove();
e=d.find(".placeholder");for(g=0;g<oa;g++)c=ma[g],l=e.clone().removeClass("placeholder").appendTo(d),l.attr("id","ivVideoList_"+g),l.find(".ivThumbImage").css("background",'url("'+c.thumbUrl+'") center no-repeat'),l.find(".ivThumbTitle").text(c.title),l.find(".ivThumbDuration").text(c.durationTimestamp);u.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=D.airyConfig;Na=!1;Qa()}}else r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||
0)+1);else p.postCountMetric("immersiveViewNotExistsClickCount")}function ia(a){var e=D.colorToAsin[a],g={},c=500;if(e&&e.asin){g.params={asin:e.asin};var l="360"+e.asin,k=Date.now();g.success=function(e){v("dppc_asyncRequestTime360",Date.now()-k);e&&b.isDefined(e.spin360.spin360Model)?(b.ajaxState(l,"success"),D.spin360ColorData[a]=e.spin360.spin360Model,a===U.getCurrentItem().color&&(S=D.spin360ColorData[a],d())):g.error()};g.error=function(){p.postCountMetric("dppc_asyncFailed360");v("dppc_asyncRequestTime360",
Date.now()-k);c*=2;16E3>=c?setTimeout(function(){k=Date.now();n.load("/gp/product/features/apparel-main-image/360.html",g)},c):b.ajaxState(l,"fail")};b.ajaxState(l)&&"fail"!==b.ajaxState(l)||(n.load("/gp/product/features/apparel-main-image/360.html",g),b.ajaxState(l,"sent"))}}function ca(){return b.isDefined(D.spin360ConfigEnabled)&&D.spin360ConfigEnabled}var ba,D,U,ka,W,u,ha,la,ma,Z,da,oa,ja,M,aa,wa,S,ra,na,sa,va,ua,Ka,Ja,Oa=!1,Ha=!1,Ia=!1,xa=0,ya=0,ta=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Pa=navigator.userAgent.match(/msie|trident/i),
Na=!0,Aa=!1,za=!1,Fa={},qa={},Ea,Da,Ma;y.when("a-modal").execute(function(a){Ma=a});var Qa=h.once(function(){L();fa();ea();h.on("a:popover:afterUpdatePosition:immersiveView",H);h.on("a:popover:afterShow:immersiveView",w);h.on("a:popover:afterHide:immersiveView",T);B()});return function(d,e,g,c){ba=this;D=d;U=e;k.refToModel=U;ka=c;ca()&&(D.spin360ColorData[D.landingAsinColor]=D.spin360ColorData[D.defaultColor],D.spin360ColorEnabled[D.landingAsinColor]=D.spin360ColorEnabled[D.defaultColor]);b.isDefined(D.staticImages.icon360)&&
a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",f.addStyleCodeToURL(D.staticImages.icon360,"_FMpng_RI_"));ba.render=function(a,d,e,g,c,l){Na=!0;ca()&&D.spin360ColorEnabled[a]&&!b.isDefined(D.spin360ColorData[a])&&(D.spin360ColorData[a]={},ia(a));b.isImmersiveViewEnabled(D,U.getCurrentItem().color)&&ca()&&D.spin360ColorEnabled[a]&&(d===D.maxAlts&&(a=g.find(".item.imageThumbnail"),e=g.find(".item.videoThumbnail"),b.isDefined(e)&&1<e.length?e.last().remove():a.last().remove(),
d--),a=g.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),h.declarative.create(a,"button-360-click"),g.append(a),d++,p.postCountMetric("dppc_display360"));return d};ba.update=function(a){};b.isImmersiveViewEnabled(D,U.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");ka.register("imageClick",ga);ka.register("button360Click",ga)}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric",
"postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(h,a,b,n,p,k,C){function f(){var b=L.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-C.getDimension(c,"padding-top")-C.getDimension(c,"padding-bottom");a("#iv-tab-view-container").css("height",b);N=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==a(this).css("display")}).length;1<N?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),
c=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),b-=c):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",b);h.trigger("dp:image-block:immersive-view:resize")}function x(){h.trigger("dp:image-block:immersive-view:reset")}function B(l){if(b.isImmersiveViewEnabled(H,L.getCurrentItem().color))if(z){var m=l.$event.originalEvent;m.acknowledge&&m.acknowledge(l.$currentTarget[0]);p.isEnabled&&k.logImmersiveViewRequestServed(p);
n.postCountMetric("dppc_immersiveViewOpened");b.isDefined(l)&&("button-360-click"===l.action?a("#iv360TabHeading").click():"videoIngressClick"===l.action?(O=l.clickTimeStamp,a("#ivVideosTabHeading").click()):a("#ivImagesTabHeading").click());m=L.getImmersiveViewModalInstance();if(b.isDefined(m))m.show();else{l=a("#auiImmersiveViewDiv");var m=Math.min(Math.max(a(r).height()-150,540),1080),f=Math.min(Math.max(a(r).width()-75,990),1980),m=z.create(l,{name:"immersiveView",activate:"onclick",width:f,height:m,
popoverLabel:"ImmersiveView",hideHeader:!0});L.setImmersiveViewModalInstance(m);l.click()}G&&(G=!1,c(),h.trigger("dp:image-block:immersive-view:init"))}else r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else n.postCountMetric("immersiveViewNotExistsClickCount")}var F,H,L,A,G=!0,N=0,O,z;y.when("a-modal").execute(function(a){z=a});var c=h.once(function(){h.on("a:popover:afterUpdatePosition:immersiveView",
f);h.on("a:popover:afterShow:immersiveView",f);h.on("a:popover:afterHide:immersiveView",x)}),w=h.once(function(){var b=a("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",function(c){var k=b.filter(".iv-active");k.attr("id")!==a(this).attr("id")&&h.trigger("dp:ivTabs:"+k.find("a").attr("data-iv-tab-view")+":deselect",c);b.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();k=a(this).find("a").attr("data-iv-tab-view");a("#"+k).show();
"ivVideosTab"===k&&(c.clickTimeStamp=O||c.timeStamp);h.trigger("dp:ivTabs:"+k+":select",c);n.postCountMetric("dppc_"+k);return!1})});return function(a,c,k,f){F=this;H=a;L=c;p.refToModel=L;A=f;F.render=function(a,b,c,k,d,e){n.postCountMetric("dpcc_altThumbs_"+b);G=!0};F.update=function(a){};F.getTitle=function(){};F.getVariationSelectionInfo=function(){};w();b.isImmersiveViewEnabled(H,L.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");A.register("imageClick",B);A.register("button360Click",
B);b.useTabbedImmersiveView(H)&&A.register("videoIngressClick",B)}});"use strict";y.when("A").register("ImageBlockLoader",function(h){return{load:function(a,b){b=b||{};b.timeout=b.timeout||4E3;h.ajax(a,b)}}});"use strict";y.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(h,a,b,n,p,k,C,f){function x(a){return null!==a&&"undefined"!==typeof a}function B(d){var e=0;a.each(d,function(a,d){var b=parseInt(d[1],
10);b>e&&(e=b)});return e}function F(d){var e=0;a.each(d,function(a,d){var b=parseInt(d[0],10);b>e&&(e=b)});return e}function H(a,e,b){e=e.width();if(b.naturalMainImageSize)return e;a=B(a);0<a&&(e=Math.min(e,a));return e}function y(a,e,b){e=e.height();if(b.naturalMainImageSize)return e;a=F(a);0<a&&(e=Math.min(e,a));return e}function A(d){var e;a.each(d,function(a,d){x(e)||(e=d[1]/d[0])});return e||1}function G(a,e,b){e.fadeTo(500,0,function(){O(a,b);e.fadeTo(500,1)})}function N(a){a&&a.toggle()}function O(d,
e){var b=e.find("img");x(b[d])&&a(b[d]).click()}function z(a,e){P[a]=e?e:P[a];return P[a]}function c(d,e,b){b=b||t;b=b.colorImages;if(1>b.length||!x(b[d])||!x(e))return-1;var c=-1;a.each(b[d],function(a,d){d.variant===e&&(c=a)});return c}function w(d,e,b){b=b||t;b=b.colorImages;return!(x(b)&&x(b[d])&&x(b[d][e])&&x(b[d][e].main))||1>a.map(b[d][e].main,function(a,d){return d}).length?-1:b[d][e]}function l(a,e,b,c){c.parent().css("z-index",2);0!==b&&0!==e&&(e/=b,a>e?c.css("width",e/a*100+"%"):c.css("height",
a/e*100+"%"))}function m(d,e){var b;if(b=d.useIV)b=d.colorImages&&d.colorImages[e]&&0<d.colorImages[e].length?!0:!1;C.isEnabled&&(C.IVApplicaple=b,f.logImmersiveViewApplicability(a,C));return b}function q(a){return a.playVideoInImmersiveView&&"false"!==a.playVideoInImmersiveView}var v,E,K,t=a.extend(!0,{},p,k),P={};return{isDefined:x,isDefinedAndEmpty:function(a){return x(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return x(a)?"object"===typeof a&&0===Object.keys(a).length:
!0},isDefinedAndNotEmpty:function(a){return x(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:A,getMaxHeightOfMainImage:y,getMaxWidthOfMainImage:H,getMaxDimensionsOfMainImage:function(a,e,b){if(b.acEnabled)return[e.height(),e.width()];var c=y(a,e,b);e=H(a,e,b);a=A(a);b=e/a;e=Math.min(e,c*a);c=Math.min(c,b);return[c,e]},getContainerHeight:function(a,e,b){var c=a.get(0);a=0;if(x(c)){a=c.offsetWidth/e;a=Math.min(a,b);var k;e=t.mainImageHeightPartitions;
b=t.mainImageMaxSizes;if(x(b)&&x(e)){for(var l=0,f=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=0;c<e.length;c++)f>e[c]&&(l=c+1);b.length>=l&&(k=b[l])}x(k)&&(a=Math.min(k[1],a))}return a},getColorFromState:function(d,e){if(d){e=e||t;var b="";a.each(e.visualDimensions,function(a,e){d[e]&&(b+=" "+d[e])});return b&&b.substring(1)}},createThumbnail:function(a,b,c,k){var l=c.find(".template").clone().removeClass("template").addClass("item"),f=document.createElement("img");
f.src=b;l.find(".placeHolder").replaceWith(f);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&l.addClass("heroImageThumbnail");x(k)&&l.addClass(k);h.declarative.create(l,"thumb-action",a);l.attr&&l.attr("data-ux-click","");c.append(l)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(d,e,c,k,
l,f,m,h){var q=a.extend({},c.foresterMetadataParams);null!==k&&(q.method+="."+k);var w=[];e.disabledViewIds&&(w=e.disabledViewIds);return b.embed({parentElement:d[0],streamingUrls:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,swfUrl:c.swfUrl,foresterMetadataParams:q,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl},videoAds:c.videoAds,bindings:{play:function(){"ImmersiveView"===
k?v||(v=!0,n.postCountMetric("dppc_chromefulVideoPlayedIV")):E||(E=!0,n.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(a,d,b){l&&(G(0,f,h),N(m))}}],disabledViewIds:w})},loadMediaIntoAiry:function(a,b,c,k){a&&a.getMediaSourceInfo()!==b.url&&(k?(K={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(K)):a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||
"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}))},showUnavailable:function(d){d&&(a("#imageBlock .unvailableVariation").html(d),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:G,toggleVideoCaption:N,selectThumbnail:O,spinner:function(d,b){var c=a("#imageBlock .a-spinner").parent();0===c.length&&(c=a("\x3cdiv\x3e\x3c/div\x3e").append(a("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),
d.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));b?c.show():c.hide();return c},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:z,getIndexForVariant:c,getImageHash:w,lazyLoadingRequired:function(a,b,g){b=Math.max(c(a.color,
b.getCurrentItem().variant,g),0);b=-1!==w(a.color,b,g);a=g.colorToAsin[a.color]&&g.colorToAsin[a.color].asin;a=!a||"success"!==z(a);return!g.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:l,repositionVideoBanner:function(a,b,c,k){setTimeout(function(){var c=a.width()/a.height();l(c,16,9,b)},k||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:
0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!x(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return x(a)&&x(a[b])&&x(a[b].url)?a[b]:-1},isImmersiveViewEnabled:m,playVideoInImmersiveView:function(a,b){return m(a,b)&&q(a)},useTabbedImmersiveView:q,getMediaSourceInfo:function(){return x(K)?K.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,c){b=a.colorToAsin[b]&&a.colorToAsin[b].asin;b=x(b)?b:a.mediaAsin;return{pageContext:{page:"DetailPageTablet",placement:"ImageBlock",
marketplaceID:c.marketPlaceID,locale:c.languageCode,requestId:a.requestId,product:{contentID:b,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:"ASIN",imageURL:c.slateUrl,videoURL:c.url}},configuration:{id:"div-light-player",type:"lightplayer",binder:"lightplayer",assets:["VSECommonComponentAssets","Brila"],features:{features:{placementcontext:"vse_ib_tablet_web"}}}}},addTag:function(a){r.ue&&r.ue.tag&&r.ue.tag(a)}}});"use strict";y.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",
function(h,a,b,n){function p(c,k,f,h){if(!b.isjQueryObjDefined(c.find(".a-button-selected"))){var v=G.getCurrentItem();if(!h||"chromeless-video"!==v.type||!A.autoplayVideo){h=0;if("hero-image"===v.type){h=C(v.color,v.variant);if(-1===h)return;h=-1!==h?h:0}var p=k+h;p>=f&&(h=0,p=k);k=n.getHeroImageHash(A,v.color,h);-1!==k&&(N.dispatch("updateModel",{data:{index:h,thumbnailIndex:p,variant:k.variant,type:"hero-image"}}),k=c.find(".item").get(p),b.selectGivenThumbnail(a(k),c))}}}function k(c,k,f){if("hero-video"===
G.getCurrentItem().type)return c;k=A.heroImage&&A.heroImage[k];var h=c;b.isDefined(k)&&(a.each(k,function(a,k){c<A.maxAlts&&(b.createThumbnail({type:"hero-image",index:a,thumbnailIndex:c,variant:k.variant},k.thumb,O,"imageThumbnail"),c++)}),p(O,h,c,f));return c}function C(c,k){var f=A.heroImage;if(1>f.length||!b.isDefined(f[c])||!b.isDefined(k))return-1;var h=-1;a.each(f[c],function(a,b){b.variant===k&&(h=a)});return h}function f(){if(z.length&&A.repositionHeroImage){var a=n.getHeroDimParams(A,G.getCurrentItem()),
c;b.isDefined(a)&&(c=b.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",z.css({"background-position":c,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function x(a,c,k,f){if(z.length&&a&&c){if("function"===typeof k||f){var h=new Image;h.onload=f?function(){z.css("background-image",'url("'+a+'")')}:k;h.src=a}k=c[1];var h=c[0],C;f||z.css({"background-image":'url("'+a+'")'});A.repositionHeroImage&&(c=
n.getHeroDimParams(A,G.getCurrentItem(),c),b.isDefined(c)&&(k=c.width,h=c.height,C=b.isDefined(c.xPos)?c.xPos+"px "+c.yPos+"px ":"center "+c.yPos+"px "));z.css({"background-position":C,"background-size":k+"px "+h+"px ","max-width":k+"px ","min-height":h+"px ",filter:"","-ms-filter":""})}}function B(b,c,k,f){b=n.getHeroImageHash(A,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];x(c,b.main[c],k,f)}function r(a,b,c){if("hero-image"!==a.type)return-1;var k=C(a.color,G.getCurrentItem().variant),
k=-1!==k?k:0;if(-1===n.getHeroImageHash(A,a.color,k))return-1;var f=G.getCurrentItem();a.thumbnailIndex=f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=k;H(a,b,c)}function H(a,b,k){var f=n.getHeroImageHash(A,a.color,a.index),C;C=a&&c&&h.equals(a,c)?!0:!1;c||(c=a);if(!C&&a||b)B(a.color,a.index,b,k),c=a;z.removeClass("hide-background");h.trigger("dp:image-block:update",f)}var y,A,G,N,O,z,c={};return function(c,h,m,q){y=this;A=c;G=h;N=q;A.heroImage[A.landingAsinColor]=A.heroImage[A.defaultColor];
y.render=function(b,c,f,h,l,d,e){O=h;z=a("#heroImage");b=k(c,b,d);r(G.getCurrentItem(),e,d);return b};y.update=function(a){var c=a.data;"ingress"!==c.type&&z.addClass("hide-background");"swatchHover"===a.type?a.captured||(c.type=G.getCurrentItem().type,-1!==r(c)&&(a.captured=!0)):"hero-image"===c.type&&(H(c),"click"!==a.type&&A.usePeekHover||b.selectGivenThumbnail(a.$declarativeParent,O))};N.register("resize",f)}});"use strict";y.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",
function(h,a,b){var n,p,k,C;return function(a,x,B,r){n=this;p=a;k=r;n.render=function(a,k,f,x,B,r,z){C=x;n=this;f=p.maxAlts;x=k;B=p.colorImages[a]?p.colorImages[a].length:0;B+=b.getVideosCount(a,p);a=p.heroImage[a];r=0;a&&(r=a.length);a=B+r;a>f&&(f=a-f,a=C.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),f+="+",x={type:"ingress",index:0,thumbnailIndex:k,variant:""},a.find("#altIngressText").append(f),h.declarative.create(a,"thumb-action",
x),C.append(a),x=k++);return x};n.update=function(a){"ingress"===a.data.type&&"click"===a.type&&k.dispatch("imageClick",a)}}});"use strict";y.when("imageBlockUtils").register("ImageBlockState",function(h){return function(a,b,n){this.getImageHash=function(b){var k=n.getCurrentItem();b=h.getIndexForVariant(k.color,b||"MAIN",a);return h.getImageHash(k.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});
"use strict";y.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(h,a){function b(a,b){var f;if(b.repositionHeroImage){f=a[1];var h=a[0];if(768>=(r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))f*=.7,h*=.7;else{var n=((r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,n=Math.max(Math.min(n,1),0);f*=.7+.3*n;h*=.7+.3*n}f=[f,h]}return f}function n(b,h,f){var n;if(f.repositionHeroImage){var p=r.innerWidth||
document.documentElement.clientWidth||document.body.clientWidth;f=f.heroFocalPoint;if(a.isDefined(f)){n=Math.max((p-Math.min(1500,b))/2,0);var F=Math.max((p-b)/2,0);n-=F;p=Math.max(Math.min(p,1500),1024);n=n+(p-420-23)/2-b/h[1]*f}}return n}function p(b,n,f){b=b.heroImage;return!(a.isDefined(b)&&a.isDefined(b[n])&&a.isDefined(b[n][f])&&a.isDefined(b[n][f].main))||1>h.map(b[n][f].main,function(a,b){return b}).length?-1:b[n][f]}return{getHeroImageHash:p,getHeroDimParams:function(k,C,f){if(k.repositionHeroImage){if(!a.isDefined(f)){f=
p(k,C.color,C.index);if(-1===f)return;C=h.map(f.main,function(a,b){return b})[0];f=f.main[C]}C=b(f,k);k=n(C[0],f,k);return{height:C[1],width:C[0],xPos:k,yPos:75}}}}});"use strict";y.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(h,a,b){function n(a,n){var f=h.copy(a);if(b.isDefined(a)&&a.length>n){try{for(var p=-1,r=0;r<a.length;r++){var F=a.charAt(r);if(" "===F||"."===F||"?"===F||";"===F||","===F||":"===F)p=r;if(r===n-4){f=a.substring(0,-1===p?r:p);break}}}catch(y){f=
a.substring(0,n-3)}f+="..."}return f}function p(a,b){var f=a.lastIndexOf(".");return a="_"===a.charAt(f-1)?a.substring(0,f-1)+b+a.substring(f):a.substring(0,f)+"."+b+a.substring(f)}return{getDimension:function(a,b){var f=parseInt(a.css(b),10);return isNaN(f)?0:f},attachTabSelectHandler:function(a,b){h.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){h.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){h.on("dp:image-block:immersive-view:resize",a)},
detachImmersiveViewResizeHandler:function(a){h.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){h.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:p,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,
"");var f="_AA50_";b&&(f+="FMpng_RI_");return p(a,f)},populateVariationSelection:function(k){if(b.isDefined(r.DetailPage)&&b.isDefined(r.DetailPage.StateController)){k.empty();var h=r.DetailPage.StateController.getState(),f=h.variation_label_order,n;for(n in f)if(f.hasOwnProperty(n)){var p=f[n],F=h.selected_variations[p],p=h.variation_display_labels[p];F&&a("\x3cdiv/\x3e").addClass("ivVariations").text(p+":"+F).appendTo(k)}}},populateTitle:function(a,b,f){a.html(f.title);a.attr("title",a.text());
a.html(n(f.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,f,h){r.ueLogError&&r.ueLogError(h,{logLevel:a,attribution:b,message:f})}}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(h,a,b,n,p){function k(){p.populateTitle(m.find("#ivTitle"),160,w)}function r(){var a=l.getCurrentItem().color;v=w.colorImages[a];
q=w.heroImage[a];E=K=0;b.isDefined(q)&&(E=q.length);b.isDefined(v)&&(K=v.length)}function f(a){return a.hiRes||a.large||a.main[a.main.length-1]}function x(){var a=m.find("#ivStage").find("#ivLargeImage"),b=a.width(),d=a.height(),c=a.find(".fullscreen");c.removeAttr("style");var f=c.width(),h=c.height();0<c.length&&(c[0].naturalWidth&&(f=c[0].naturalWidth),c[0].naturalHeight&&(h=c[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,h=0===h?1:h,k=Math.min(b/f,d/h),l=h*k,n=f*k;1>k?(P?a.css("cursor",
"url('"+w.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),g=!0):g=!1;f=Math.min(n,f);h=Math.min(l-20,h);c.css({"margin-top":(d-h)/2,"margin-left":(b-f)/2,height:h,width:f});a.css("visibility","visible");e=!1}function B(a){var b=m.find("#ivLargeImage");b.css("visibility","hidden");b.empty();p.animateStageIn(b);b.append(a);x()}function F(d){m.find("#ivLargeImage").css("display","none");m.find("#ivLargeImage").css("display",
"block");var c;"hero-image"===d?b.isDefined(q)&&(c=f(q[t.index])):b.isDefined(v)&&(c=f(v[t.index]));if(b.isDefined(c)){m.find(".fullscreen").remove();var e=a("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),g=m.find("#ivLargeImage");p.animateStageOut(g,function(){e.load(function(){B(e)});if(e[0].complete)B(e);else{g.empty();var b=(g.height()-104)/2,d=(g.width()-80)/2;a("\x3cimg\x3e").attr("src",w.staticImages.spinner).css({position:"relative",top:b+"px",left:d+"px"}).appendTo(g)}})}}function y(a){m.find(".ivThumb").removeClass("selected");
a.addClass("selected");a.hasClass("ivHeroImage")?t.type="hero-image":t.type="image";t.index=a.attr("id").split("_")[1];F(t.type);n.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(t.index,10)+1)+"_"+(E+K))}function L(){m.delegate(".ivThumb","click",function(){var b=a(this);y(b)})}function A(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function G(a){var b=J.top-(a.pageY-R[1])*Q;a=A(J.left-(a.pageX-R[0])*Q,I.left);b=A(b,I.top);m.find(".fullscreen").css({left:a,top:b})}function N(){m.delegate("#ivLargeImage",
"click",function(a){if(e)x();else if(g){m.find(".fullscreen").removeAttr("style");if(g){var b=m.find("#ivLargeImage"),d=b.find(".fullscreen");P?b.css("cursor","url('"+w.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));e=!0;var c=m.find("#ivLargeImage");I.left=c.width()-d.width();I.top=c.height()-d.height();var c=b.height()/2,f=b.width()/2;R=[b.offset().left+f,b.offset().top+c];J.top=c-d.height()/2;J.left=f-d.width()/2;
d.css({position:"relative",left:J.left,top:J.top});Q=Math.max(d.height()/b.height(),d.width()/b.width())}G(a);n.postCountMetric("dpcc_iv_largeImageCLick")}});m.delegate("#ivLargeImage","mousemove",function(a){e&&G(a)})}function O(){m.find("#ivLargeImage").empty()}function z(c){if(d){m=a("#ivMain");r();t=l.getCurrentItem();k();p.populateVariationSelection(m.find("#ivVariationSelection"));c=m.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var e=E+K,g=0,f=0;g<e;)for(var h=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),
n=0;4>n&&g<e;n++,g++,f++)if(f<E){var w=q[g].thumb,z=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(h);z.find(".ivThumbImage").css("background",'url("'+p.getResizedThumbnailURL(w)+'") center no-repeat')}else f>=E&&f<K+E&&(w=v[g-E].thumb,z=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(g-E)).appendTo(h),z.find(".ivThumbImage").css("background",'url("'+p.getResizedThumbnailURL(w)+
'") center no-repeat'));X();d=!1}else k();c=a("#ivImagesTab").height();m.css("height",c);e=m.find("#ivTitle").outerHeight(!0);g=m.find("#ivVariationSelection").outerHeight(!0);f=m.find("#ivThumbs");h=p.getDimension(f,"margin-top")+p.getDimension(f,"margin-bottom");f.css("height",c-e-g-h);m.find("#ivLargeImage").css("height",c);c=m.find("#ivStage");e=m[0]&&m[0].getBoundingClientRect&&Math.floor(m[0].getBoundingClientRect().width)||m.width();c.css("width",e-p.getDimension(m,"padding-left")-p.getDimension(m,
"padding-right")-m.find("#ivThumbColumn").width()-p.getDimension(c,"margin-left")-p.getDimension(c,"margin-right"));t=l.getCurrentItem();c="hero-image"===t.type?m.find("#ivHeroImage_"+t.index):"image"===t.type?m.find("#ivImage_"+t.index):b.isDefined(q)?m.find("#ivHeroImage_"+t.index):m.find("#ivImage_"+t.index);b.isjQueryObjDefined(c)||(c=m.find("#ivImage_0"));y(c)}var c,w,l,m,q,v,E,K,t,P=navigator.userAgent.match(/msie|trident/i),d=!0,e=!1,g=!1,I={},J={},Q,R,d=!0,X=h.once(function(){L();N();p.attachImmersiveViewResizeHandler(z);
p.attachTabDeselectHandler("ivImagesTab",O)});return function(b,e,g,f){c=this;w=b;l=e;c.render=function(b,c,e,g,f,h){d=!0;r();0===E+K?p.hideTabHeading("ivImagesTabHeading"):p.unhideTabHeading("ivImagesTabHeading");1===E+K?a("#ivThumbs").hide():a("#ivThumbs").show()};c.update=function(a){};p.attachTabSelectHandler("ivImagesTab",z)}});"use strict";y.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",
function(h,a,b,n,p,k,C){function f(){v.delegate(".ivThumb","click",function(){var b=a(this);v.find(".ivThumb").removeClass("selected");b.addClass("selected");b.hasClass("ivThumbVideo")&&(E.type="chromeful-video",E.index=b.attr("id").split("_")[1])})}function x(){if(Y){var b=a("#ivVideosTab").height();v.css("height",b);var d=v.find(".vse-lb-container");K=b-p.getDimension(d,"padding-top")-p.getDimension(d,"padding-bottom");d.css({"max-height":b,overflow:"hidden"});if(X){v.css({"max-width":Math.floor(1.77*
K)});return}var b=v.find(".vse-player-container"),d=v.find(".vse-video-action-strip"),c=v.find(".vse-lb-video-metadata"),e=Math.floor(K-p.getDimension(c,"height")-p.getDimension(d,"height")),g=Math.floor(1.77*e);b.css({"max-height":e,"max-width":g,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":g,marginLeft:"auto",marginRight:"auto"});d.css({"max-width":g,marginLeft:"auto",marginRight:"auto"})}fa&&(b=v.find(".vse-vertical-scroll"),d=p.getDimension(b,"margin-top")+p.getDimension(b,"margin-bottom"),
b.css("max-height",K-d))}function B(){y();t&&t.pause();T=!1;Q=!0;g=null;V=!0;Y=!1}function y(){T=!1;t&&t.pause()}function H(b){g=b.clickTimeStamp;R&&(C.get(h,"#ivVideoBlock",m,ca,ba),v=a("#ivVideoBlock"),l.getCurrentItem(),E=l.getCurrentItem(),ea());x();T=!0;R=!1;G()}function L(b){R&&(v=a("#ivVideoBlock"),l.getCurrentItem(),E=l.getCurrentItem(),ea());T&&G();x()}function A(a){t=a.player;Y&&(z(),G())}function G(){if(t&&T&&(v.find(".vse-lb-container").animate({opacity:1},200),t.play(q),n.postCountMetric("dpcc_vse_videoBlock_video_played"),
Q)){var a=r.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,n.postTimeMetric("dpcc_vse_vitff",a),Q=!1)}}function N(){h.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function O(a){P=a.popover.$popover;Y=!0;z()}function z(){Y&&V&&T&&t&&(P.addClass(h.$(P).find(".vse-lb-container").data("cssClass")),h.trigger("vse:detailpage-imageblock:page:lightBoxOpened",{lightBoxId:"ivVideoBlock",assetSpec:q}),x(),V=!1)}var c,w,l,m,q,v,E,K,t,P,d,e,g,I,J,Q=!0,R=!0,X=!1,fa=!1,T=!1,
V=!0,Y=!1,ea=h.once(function(){f();p.attachImmersiveViewResizeHandler(L);p.attachTabDeselectHandler("ivVideosTab",y);p.attachImmersiveViewResetHandler(B)}),ga=function(d,c,e){a("#ivVideoBlockSpinner").addClass("aok-hidden");n.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+c.placement);d=l.getCurrentItem().color;d=b.getVideoHash(d,0,w);t||(t=b.createAiryInstanceForChromeful(a("#ivVideoBlock"),d,w.airyConfig,"ImmersiveView"));X=!0;a("#ivVideoBlock").css({"max-width":1.77*K,margin:"0 auto"});
T&&X&&t.play({isAsync:!0})},ia=function(b,d,c){R||C.get(b,"#ivVideoBlock",m,ca,ba);a("#ivVideoBlockSpinner").addClass("aok-hidden")},ca=function(a,b,d){fa=!0;x()},ba=function(a,b,d){n.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,f,n,r){c=this;w=a;l=f;c.render=function(a,c,f,n,r,z){a=l.getCurrentItem().color;c=b.getVideoHash(a,0,w);d=w.colorToAsin[a]&&w.colorToAsin[a].asin;d=b.isDefined(d)?d:w.mediaAsin;e=null!==w.vseVideoDataSourceTreatment&&
"T1"===w.vseVideoDataSourceTreatment?"ASIN":"physicalID";I=w.contentWeblab;J=w.contentWeblabTreatment;R=!0;-1===c?p.hideTabHeading("ivVideosTabHeading"):(p.unhideTabHeading("ivVideosTabHeading"),m={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:d,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:e,videoURL:c.url,imageURL:c.slateUrl},requestId:w.dpRequestId,weblabContext:[{name:I,assignment:J,ignoreForG2S2Key:!0}],
metadata:{ProductTitle:w.title}},q={videoUrl:m.video.videoURL,contentId:m.video.contentID,duration:0,vendorCode:"",eventTimestamp:b.isDefined(g)?g:h.now(),imageUrl:m.video.imageURL,productAsin:m.product.contentID,index:0},b.isDefinedAndNotEmpty(t)&&(t.destroy(),t=null),k.get(h,"#ivVideoBlock",m,ia,ga))};c.update=function(a){};p.attachTabSelectHandler("ivVideosTab",H);h.on("vsePlayer-detailpage-imageblock",A);h.on("a:popover:afterShow:immersiveView",O);h.on("a:popover:beforeHide:immersiveView",N)}});
"use strict";y.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(h,a,b,n,p,k,r){function f(){var b=a("#iv360Tab").height();g.css("height",b);var d=g.find("#ivTitle360").outerHeight(!0),c=g.find("#ivVariationSelection360").outerHeight(!0),e=g.find("#ivThumbs360"),f=r.getDimension(e,"margin-top")+r.getDimension(e,"margin-bottom");e.css("height",b-d-c-f);b=g.find("#ivStage360");d=g[0]&&g[0].getBoundingClientRect&&
Math.floor(g[0].getBoundingClientRect().width)||g.width();b.css("width",d-r.getDimension(g,"padding-left")-r.getDimension(g,"padding-right")-g.find("#ivThumbColumn360").width()-r.getDimension(b,"margin-left")-r.getDimension(b,"margin-right"))}function x(){L();var a=g.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});r.animateStageIn(a)},200);y()}function y(){if(0<U){var a=g.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function F(b,c){if(U<
b.length){var e=a("\x3cimg /\x3e").css({display:"block",width:6*J+"px",height:Q+"px"});e.hide();c.append(e);e.get(0).onload=function(){c.closest(document.documentElement).length&&(U++,1===U&&(y(),0<ia&&(p.time("dppc_loadTime360",Date.now()-ia,d.mediaAsin),k.postTimeMetric("dppc_loadTime360",Date.now()-ia))),0<ca&&(p.time("dppc_perSpriteloadTime360",Date.now()-ca,d.mediaAsin),k.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ca)),g.find("#iv360Spinner").hide(),e.show(),ea=5*I.imageLocations[Math.floor(ga/
I.imageLocations[0].length)][ga%I.imageLocations[0].length],F(b,c))};e.attr("src",b[U].replace(/(\._SP)\d+(,)\d+/,"$1"+X+"$2"+R));ca=Date.now()}}function H(a){if(b.isDefined(I.spriteWidthSizes)&&0<I.spriteWidthSizes.length){var d=I.spriteWidthSizes,c=d.length,e=d[0],g=d[c-1];if(a<=e)return e;if(a>g)return g;for(e=0;e<c;e++)if(a>d[e]&&a<=d[e+1])return d[e+1]}else return a}function L(){var b=g.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),
b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",d.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),V=!0,A())}function A(){if(b.isDefined(I.spriteURLs)&&b.isDefined(g)&&V&&!Y){var e=g.find("#ivLarge360"),
f=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(I.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",I.staticImages.hint360).appendTo(f);a("\x3cdiv\x3e").css({"text-align":"center"}).text(d.staticStrings.dragToSpin).appendTo(f);f.appendTo(e);var f=I.imageWidth,h=I.imageHeight,k=e.parent().width(),l=e.parent().height(),m=0,n=0;f/h>k/l?(X=H(k),R=Math.round(h/
f*X),J=Math.ceil(k),Q=Math.ceil(R/X*k),n=(l-Q)/2):(R=H(l),X=Math.round(f/h*R),Q=Math.ceil(l),J=Math.ceil(X/R*l),m=(k-J)/2);e.css({"margin-left":m,"margin-top":n,width:J+"px",height:Q+"px",overflow:"hidden",position:"relative"});e.children("#image-360-sprites").css("width",6*J+"px");F(I.spriteURLs,g.find("#image-360-sprites"),0);f=g.find("#ivLarge360");f.bind("mousedown",z);f.bind("touchstart",G);f.bind("touchmove",N);f.bind("touchend",O);a(document).bind("mousemove",c);a(document).bind("mouseup",
w);b.isDefined(d.staticImages.grab)&&e.css("cursor","url('"+d.staticImages.grab+"'), auto");Y=!0}}function G(a){D=!0;T=a.originalEvent.targetTouches[0].clientX}function N(a){D&&(l(a.originalEvent.targetTouches[0].clientX-T),T=a.originalEvent.targetTouches[0].clientX)}function O(a){D&&(D=!1)}function z(a){ba=!0;fa=a.originalEvent.clientX;b.isDefined(d.staticImages.grabbing)&&(a=g.find("#ivLarge360"),a.css("cursor","url('"+d.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+d.staticImages.grabbing+"'), auto"));return!1}function c(a){ba&&(l(a.originalEvent.clientX-fa),fa=a.originalEvent.clientX)}function w(a){ba&&(ba=!1,b.isDefined(d.staticImages.grab)&&(a=g.find("#ivLarge360"),a.css("cursor","url('"+d.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function l(a){ea-=a/J*180;W&&(p.count("dppc_360dragToSpin",d.mediaAsin),k.postCountMetric("dppc_360dragToSpin"));W=!1;for(a=ea;0>a;)a+=360;for(;360<a;)a-=360;ea=a;var c;a=360;
for(var e=0;e<U;e++)for(var f=0;f<I.imageLocations[e].length;f++){var h=Math.abs(ea-5*I.imageLocations[e][f]);h<a&&(a=h,c=e*I.imageLocations[0].length+f)}c!==ga&&(a=Math.floor(c/I.imageLocations[0].length),a!==Math.floor(ga/I.imageLocations[0].length)&&(b.isDefined(ka)||(ka=document.createElement("canvas").getContext("2d")),e=g.find("#image-360-sprites").children(),ka.drawImage(e[a],0,0)),a=g.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},
750)));ga=c;a=c%I.imageLocations[0].length*-1*J;c=-1*Math.floor(c/I.imageLocations[0].length)*Q;e=g.find("#ivLarge360").children("#image-360-sprites");e.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");e.css("transform","translate3d("+a+"px, "+c+"px, 0)")}function m(){if(ha){g=a("#ivMain360");var b=e.getCurrentItem().color;E()&&K(b);I=E()?d.spin360ColorData[b]:void 0;r.populateTitle(g.find("#ivTitle360"),160,d);r.populateVariationSelection(g.find("#ivVariationSelection360"));g.find("#ivLarge360").empty();
U=0;Y=V=!1;ga=ea=0;la();ha=!1}0!==a("#iv360Tab").height()&&(r.detachImmersiveViewResizeHandler(m),f(),x(),ia=Date.now(),u=W=!0,p.count("dppc_click360",d.mediaAsin),k.postCountMetric("dppc_click360"))}function q(c,f,g){var h=d.colorToAsin[g],l={},m=500;if(!h||!h.asin)if(g===d.defaultColor)h={asin:d.winningAsin};else return;l.params={asin:h.asin};var q="360"+h.asin,w=Date.now();l.success=function(h){p.time("dppc_asyncRequestTime360",Date.now()-w,d.mediaAsin);k.postTimeMetric("dppc_asyncRequestTime360",
Date.now()-w);if(h&&b.isDefined(h.spin360)){if(h=h.spin360.spin360Model)d.spin360ColorData[g]=h,g===e.getCurrentItem().color&&(I=d.spin360ColorData[g],A(),a("#ivThumbs360").hide(),r.unhideTabHeading("iv360TabHeading"),v(c,f,g));b.ajaxState(q,"success")}else l.error()};l.error=function(){p.count("dppc_asyncFailedTransient360",d.mediaAsin);k.postCountMetric("dppc_asyncFailedTransient360");p.time("dppc_asyncRequestTime360",Date.now()-w,d.mediaAsin);k.postTimeMetric("dppc_asyncRequestTime360",Date.now()-
w);m*=2;16E3>=m?setTimeout(function(){w=Date.now();n.load("/gp/product/features/apparel-main-image/360.html",l)},m):(p.count("dppc_asyncFailed360",d.mediaAsin),k.postCountMetric("dppc_asyncFailed360"),b.ajaxState(q,"fail"))};b.ajaxState(q)&&"fail"!==b.ajaxState(q)||(n.load("/gp/product/features/apparel-main-image/360.html",l),b.ajaxState(q,"sent"))}function v(a,c,g){if(b.isImmersiveViewEnabled(d,e.getCurrentItem().color)&&E()&&K(g)){if(c===d.maxAlts){g=a.find(".item.imageThumbnail");var f=a.find(".item.videoThumbnail");
b.isDefined(f)&&1<f.length?f.last().remove():g.last().remove();c--}g=a.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item");h.declarative.create(g,"button-360-click");a.append(g);c++;p.count("dppc_display360",d.mediaAsin);k.postCountMetric("dppc_display360")}return c}function E(){return d&&b.isDefined(d.spin360ConfigEnabled)&&d.spin360ConfigEnabled}function K(a){return b.isDefinedAndNotEmpty(d.spin360ColorData[a])?!0:b.isDefined(d.spin360LazyLoadEnabled)&&
d.spin360LazyLoadEnabled}function t(){u&&(p.time("dppc_duration360",Date.now()-ia,d.mediaAsin),k.postTimeMetric("dppc_duration360",Date.now()-ia),u=!1)}var P,d,e,g,I,J,Q,R,X,fa,T,V=!1,Y=!1,ea=0,ga=0,ia=0,ca=0,ba=!1,D=!1,U=0,ka,W=!0,u=!1,ha=!0,la=h.once(function(){r.attachImmersiveViewResizeHandler(m);r.attachImmersiveViewResizeHandler(f);r.attachImmersiveViewResetHandler(t);r.attachTabDeselectHandler("iv360Tab",t)});return function(c,g,f,h){P=this;d=c;e=g;c=d.landingAsinColor;g=d.defaultColor;b.isDefined(d.staticImages.icon360)&&
a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",r.addStyleCodeToURL(d.staticImages.icon360,"_FMpng_RI_"));E()&&(d.spin360ColorData||(d.spin360ColorData={}),c===g&&b.isDefinedAndEmpty(d.spin360ColorData[g])&&delete d.spin360ColorData[g]);P.render=function(c,e,g,f,h,k){ha=!0;E()&&K(c)?(g=d.spin360ColorData[c],b.isDefinedAndEmpty(g)?r.hideTabHeading("iv360TabHeading"):b.isDefinedAndNotEmpty(g)?(a("#ivThumbs360").hide(),r.unhideTabHeading("iv360TabHeading"),v(f,e,c)):
(d.spin360ColorData[c]={},r.hideTabHeading("iv360TabHeading"),q(f,e,c))):r.hideTabHeading("iv360TabHeading")};P.update=function(a){};r.attachTabSelectHandler("iv360Tab",m)}});y.register("nexusLogger360",function(){return{count:function(h,a){r.ue&&r.ue.event({asin:a,metricName:h,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(h,a,b){r.ue&&r.ue.event({asin:b,metricName:h,metricValue:a},"hit-360","hit360.clientEvent.3")}}});"use strict";y.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",
function(h,a){try{var b=r.location.host,n={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},p=b.split(".")[1],k=-1===b.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==n[p]?n[p]:"https://www.amazon.com/vap/ew/",C="vse_lazyLoaderHook:success:",f="vse_lazyLoaderHook:error:",x="vse_preLoaderHook:success:",B="vse_preLoaderHook:error:",F="vse_lightPlayerLoaderHook:success:",H="vse_lightPlayerLoaderHook:error:",L=4E3,A=3}catch(G){a.logError("FATAL","vse_ns_desktop","[Domain] ",
G)}y.register("vse_ns_preLoaderHook",function(){function b(f,n){try{var c=f.A,p=f.block,l=f.request,m=f.handleFailure,q=f.handleSuccess,r=c.$;n--;var E=A-n-1,y=c.now();c.ajax(k+"componentbuilder",{params:l,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:l.timeout||L,withCredentials:!0,success:function(a){var b=c.now()-y;h.postTimeMetric(x,b);h.postCountMetric(x+l.page+":"+l.placement+":"+E);r(p).html(a);q(c,l,a)},error:function(a){h.postCountMetric(B+l.page+
":"+l.placement+":"+E);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<n?b(f,n):(h.postCountMetric(B,1),m(c,l,a))}})}catch(t){a.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",t)}}return{get:function(a,f,c,h,k){b({A:a,block:f,request:c,handleFailure:k,handleSuccess:h},A)}}});y.register("vse_ns_lazyLoaderHook",function(){function b(n,p,c){try{var r=n.A,l=n.context,m=n.handleFailure,q=n.handleSuccess;p.attr("data-configuration");var v=atob(p.attr("data-configuration")),x=
JSON.parse(v),y={pageContext:l,configuration:x},t=r.now();c--;var B=A-c-1;r.ajax(k+"subcomponent/"+x.type,{params:y,paramsFormat:"json",method:"post",contentType:"application/json",timeout:l.timeout||L,withCredentials:!0,success:function(a){var b=r.now()-t;h.postTimeMetric(C,b);h.postCountMetric(C+l.page+":"+l.placement+":"+x.type+":"+B);p.html(a);q(r,y,a)},error:function(a){h.postCountMetric(f+l.page+":"+l.placement+":"+x.type+":"+B);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<
c?b(n,p,c):(h.postCountMetric(f,1),m(r,y,a))}})}catch(d){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",d)}}return{get:function(a,f,c,h,k){var m=a.$;m(f+" div[data-configuration]").each(function(){b({A:a,context:c,handleFailure:k,handleSuccess:h},m(this),A)})}}});y.register("vse_ns_videoPlayer",function(){function b(f,n,c){try{var p=f.A,l=f.block,m=f.request,q=f.handleFailure,r=f.handleSuccess,x=p.$;c--;var y=A-c-1,t=p.now();p.ajax(k+"subcomponent/lightvideoplayer",{params:m,paramsFormat:"json",
crossDomain:!0,method:"post",contentType:"application/json",timeout:m.timeout||L,withCredentials:!0,success:function(a){var b=p.now()-t;h.postTimeMetric(F,b);h.postCountMetric(F+m.page+":"+m.placement+":"+y);x(l).html(a);r(p,m,a)},error:function(a){h.postCountMetric(H+m.page+":"+m.placement+":"+y);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<c?b(f,c):(h.postCountMetric(H,1),q(p,m,a))}})}catch(B){a.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",B)}}return{get:function(a,
f,c,h,k){b({A:a,block:f,request:c,handleFailure:k,handleSuccess:h},A)}}})})});